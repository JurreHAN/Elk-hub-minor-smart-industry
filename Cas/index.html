<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio | Universiteit</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@600;700&family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css?v=2">
  <script src="scripts.js" defer></script>
</head>
<body>
  <div class="bg-shapes" aria-hidden="true"></div>

  <header class="site-header">
    <a class="brand brand-link" href="index.html">
      <span class="brand-mark">CN</span>
      <span class="brand-text">Portfolio</span>
    </a>
    <nav class="nav">
      <a href="persoonlijke-ontwikkeling.html">Smart Me</a>
      <a href="ontwerp-plantenbak.html">Smart Business</a>
      <a href="smart-technology.html">Smart Technology</a>
      <a href="smart-connection.html">Smart Connection</a>
    </nav>
  </header>

  <main>
    <section id="home" class="hero hero-centered">
      <div class="hero-text hero-text--center">
        <p class="eyebrow">Minor Smart Industry</p>
        <h1>Welkom op mijn portfolio</h1>
        <p class="lede">
          Mijn naam is Cas Nijsen en ik ben 23 jaar oud. Ik ben woonachtig in Well en studeer nu voor mijn 4e jaar op de HAN in Nijmegen. Mijn oorspronkelijke studie is Facility Management maar ik volg nu de minor Smart Industry. Ik wil jullie graag op mijn website laten zien wat ik allemaal gedaan en geleerd heb.
        </p>
      </div>
    </section>

    <section id="apis" class="section">
      <div class="section-head">
        <h2>Live API's</h2>
        <p>API weer in Nijmegen en NASA Picture of the Day.</p>
      </div>
      <div class="api-grid">
        <article class="api-card" aria-live="polite">
          <div class="api-head">
            <h3>Weer in Nijmegen</h3>
            <span class="badge">OpenWeather</span>
          </div>
          <div id="weather-status" class="api-status">Weerdata wordt geladen...</div>
          <div id="weather-data" class="weather-data"></div>
          <figure class="api-photo api-photo--inline">
            <img src="Fotos/Afbeelding Nijmegen.jpg" alt="Nijmegen">
            <figcaption>Nijmegen.</figcaption>
          </figure>
        </article>

        <article class="api-card" aria-live="polite">
          <div class="api-head">
            <h3>NASA Picture of the Day</h3>
            <span class="badge">APOD</span>
          </div>
          <div id="nasa-status" class="api-status">Afbeelding wordt geladen...</div>
          <figure class="nasa-figure">
            <img id="nasa-image" src="" alt="NASA Astronomy Picture of the Day">
            <figcaption>
              <div id="nasa-title" class="nasa-title"></div>
              <div id="nasa-date" class="nasa-date"></div>
            </figcaption>
          </figure>
          <p id="nasa-explanation" class="nasa-explanation"></p>
          <a id="nasa-link" class="nasa-link" href="" target="_blank" rel="noopener">Bekijk in hoge resolutie</a>
        </article>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <span>Portfolio smart industry</span>
    <span>Gemaakt met HTML, CSS en API data</span>
  </footer>

  <script>
    const OPENWEATHER_API_KEY = "a87f01f9b573803cbd3f8ff64c345cbd";
    const CITY_ID = 2750052;
    const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?id=${CITY_ID}&appid=${OPENWEATHER_API_KEY}&units=metric&lang=nl`;

    async function loadWeather() {
      const statusEl = document.getElementById("weather-status");
      const dataEl = document.getElementById("weather-data");

      try {
        const response = await fetch(weatherUrl);
        const data = await response.json();

        if (data.cod !== 200) {
          statusEl.textContent = `Fout: ${data.message}`;
          return;
        }

        const iconCode = data.weather[0].icon;
        const iconUrl = `https://openweathermap.org/img/wn/${iconCode}@2x.png`;

        statusEl.textContent = "";
        dataEl.innerHTML = `
          <div class="weather-top">
            <div class="weather-row">
              <img src="${iconUrl}" alt="${data.weather[0].description}">
              <div>
                <div class="weather-city">${data.name}</div>
                <div class="weather-desc">${data.weather[0].description}</div>
              </div>
            </div>
            <div class="weather-temp">${Math.round(data.main.temp)}&deg;C</div>
          </div>
          <div class="weather-badges">
            <span class="weather-badge">Voelt als ${Math.round(data.main.feels_like)}&deg;C</span>
            <span class="weather-badge">Wind ${data.wind.speed} m/s</span>
            <span class="weather-badge">Luchtvochtigheid ${data.main.humidity}%</span>
          </div>
        `;
      } catch (error) {
        statusEl.textContent = "Kon het weer niet ophalen.";
      }
    }

    const NASA_API_KEY = "UxeKbCcAyoN3e6SJx4S1cHPtoE4mgNsPYkFBkFdM";
    const nasaUrl = `https://api.nasa.gov/planetary/apod?api_key=${NASA_API_KEY}`;

    async function loadNasa() {
      const statusEl = document.getElementById("nasa-status");
      const imageEl = document.getElementById("nasa-image");
      const titleEl = document.getElementById("nasa-title");
      const dateEl = document.getElementById("nasa-date");
      const explanationEl = document.getElementById("nasa-explanation");
      const linkEl = document.getElementById("nasa-link");

      try {
        const response = await fetch(nasaUrl);
        const data = await response.json();

        titleEl.textContent = data.title || "NASA Astronomy Picture of the Day";
        dateEl.textContent = data.date || "";
        explanationEl.textContent = data.explanation || "";

        if (data.media_type === "image") {
          imageEl.src = data.url;
          imageEl.alt = data.title || "NASA APOD";
          linkEl.href = data.hdurl || data.url;
          linkEl.style.display = "inline-flex";
        } else {
          imageEl.src = "";
          imageEl.alt = "";
          statusEl.textContent = "Vandaag is de APOD een video. Bekijk deze via de link.";
          linkEl.href = data.url;
        }

        statusEl.textContent = "";
      } catch (error) {
        statusEl.textContent = "Er ging iets mis bij het laden van NASA data.";
      }
    }

    loadWeather();
    loadNasa();
  </script>
</body>
</html>
